<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="cs1.css">
</head>
<body>
    <div class="a">
      <h1 class="h21">Weather Details : </h1>  
    </div>
    <span class="s"></span>
    <div class="b">
        <video class="v" autoplay muted loop>
           <source src="vid3.mp4" type="video/mp4"> 
        </video>
        <div class="c">
            <div>
                <input type="text" placeholder="Enter City Name" id="city"><br><br>
                <button id="btn">Search</button>
            </div>
            <div>
                <h3 id="cityname">india-delhi</h3>
                <h5 id="localtime">local time</h5>
                <h5 id="currenttemp">Temperature</h5>
                <h5 id="additionaldata">Additional Data</h5>
                <select id="data">
                    <option value="">Select</option>
                    <option value="wind_kph">Winds</option>
                    <option value="pressure_in">Pressure (inches)</option>
                    <option value="humidity">Humidity</option>
                    <option value="o3">Ozone level</option>
                </select>
            </div>
            <script>
                const button = document.getElementById("btn");
                const input = document.getElementById("city");
                const cityname1 = document.getElementById("cityname");
                const localtime1 = document.getElementById("localtime");
                const currenttemp1 = document.getElementById("currenttemp");
                const additionaldata = document.getElementById("additionaldata");
                const select = document.getElementById("data");
        
                async function getWeatherData(city) {
                    try {
                        const response = await fetch(
                            `http://api.weatherapi.com/v1/current.json?key=7d8aadfb24cb48af8e565132240807&q=${city}&aqi=yes`
                        );
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return await response.json();
                    } catch (error) {
                        console.error('There was a problem with the fetch operation:', error);
                    }
                }
        
                button.addEventListener('click', async () => {
                    const cityValue = input.value;
                    const result = await getWeatherData(cityValue);
                    if (result) {
                        cityname1.innerText = `${result.location.name}, ${result.location.region}, ${result.location.country}`;
                        localtime1.innerText = `Last Updated: ${result.current.last_updated}`;
                        currenttemp1.innerText = `Temperature: ${result.current.temp_c} Â°C`;
        
                        const selectedOption = select.value;
                        if (selectedOption === 'wind_kph') {
                            additionaldata.innerText = `Winds(kmph): ${result.current.wind_kph}`;
                        } else if (selectedOption === 'pressure_in') {
                            additionaldata.innerText = `Pressure: ${result.current.pressure_in} inches`;
                        } else if(selectedOption=='humidity'){
                            additionaldata.innerText = `Humidity:${result.current.humidity}`;
                        }
                        else if(selectedOption=='o3'){
                            additionaldata.innerText = `Ozone level:${result.current.air_quality.o3}`;
                        }
                        else {
                            additionaldata.innerText = '';
                        }
                    }
                });
            </script>
        </div>
    </div>
</body>
</html>